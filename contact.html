<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--==================== UNICONS ====================-->
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
        
        
        <!--==================== CSS ====================-->
        <link rel="stylesheet" href="styles.css">

        <title>Martial Portfolio</title>
    </head>
    <body>
        <!--==================== HEADER ====================-->
        <header class="header" id="header">
            <nav class="nav container">
                <a href="#" class="nav__logo">Martial</a>
                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list grid">
                        <li class="nav__item">
                            <a href="index.html" class="nav__link active-link">
                             Home
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="about.html" class="nav__link">
                                About
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="Blogs.html" class="nav__link">
                                 Blogs
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="portfolio.html" class="nav__link">
                                 my work
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="contact.html" class="nav__link">
                               Contactme
                            </a>
                        </li>

                        <li class="nav__item nav__login dropdown">
                            <a href="login.html" class="nav__link">Sign in</a>
                            
                        </li>

                        <li class="nav__item dropdown admin">
                           
                        </li>

                       
                    </ul>
                    <div class="hamburger">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                    
                </div>
            </nav>
        </header>


        <!--==================== MAIN ====================-->
        <main class="main">
          <!--==================== CONTACT ME ====================-->
          <section class="contact section" id="contact">
            <h2 class="section__title">Contact Me</h2>
            <span class="section__subtitle">Get in touch</span>

            <div class="contact__container container grid">
                <div>
                    <div class="contact__information">
                        <i class="uil uil-phone contact__icon"></i>
                        <div>
                            <h3 class="contact__title">Call Me</h3>
                            <span class="contact__subtitle">+250780681129</span>
                           
                        </div>
                    </div>

                    
                    <div class="contact__information">
                        <i class="uil uil-envelope contact__icon"></i>

                        <div>
                            <h3 class="contact__title">Email</h3>
                            <span class="contact__subtitle">martialkirenga21@gmail.com</span>
                        </div>
                    </div>


                    <div class="contact__information">
                        <i class="uil uil-map-marker contact__icon"></i>
                        <div>
                            <h3 class="contact__title">Location</h3>
                            <span class="contact__subtitle">Kigali, Rwanda</span>
                        </div>
                    </div>
                </div>


                <form class="contact__form grid" id="contact-form">
                    <div class="contact__inputs grid">
                        <div class="contact__contact">
                            <label for="" class="contact__label">Name</label>
                            <input type="text" name="user_name" class="contact__input" id="contact-name">
                        </div>

                        <div class="contact__contact">
                            <label for="" class="contact__label">Email</label>
                            <input type="email" name="user_email" class="contact__input" id="contact-email">
                        </div>
                    </div>

                    <div class="contact__contact">
                        <label for="" class="contact__label">Question</label>
                        <input type="text" id="contact-question" class="contact__input" name="project_name">
                    </div>

                    <div class="contact__contact">
                        <label for="" class="contact__label">Message</label>
                        <textarea id="contact-message" name="user_message" cols="0" rows="7" class="contact__input"></textarea>
                    </div>
                    <div>

                        <button type="submit" class="button button--flex ">
                            Send Message
                            <i class="uil uil-message button--icon"></i>
                        </button>
                    </div>
                </form>
            </div>

        </section>
        </main>

        <!--==================== FOOTER ====================-->
        <footer class="footer">
         <div class="footer__bg">
            <div class="footer__container container grid">
                <div>
                    <h1 class="footer__title">Martial</h1>
                    <span class="footer__subtitle">Backend developer</span>
                </div>

                <ul class="footer__links">
                    <li>
                        <a href="#services" class="footer__link">Services</a>
                    </li>

                    <li>
                        <a href="#portfolio" class="footer__link">Portfolio</a>
                    </li>

                    <li>
                        <a href="#contact" class="footer__link">Contactme</a>
                    </li>
                </ul>


                <div class="footer__socials">
                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-facebook-f"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-instagram"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-twitter-alt"></i>
                    </a>
                </div>
            </div>
            <p class="footer__copy">&#169; Martial. All right reserved</p>
         </div>
        </footer>       
        <script>
            const form = document.getElementById('contact-form')
            const navMenu = document.querySelector(".nav__list")
            const hamburger = document.querySelector(".hamburger")
            const loginDiv = document.querySelector('.nav__login');
            const Admin = document.querySelector('.admin');




            hamburger.addEventListener("click", () => {
             hamburger.classList.toggle("active")
              navMenu.classList.toggle("active")
            })




 form.addEventListener('submit', (e) => {
e.preventDefault()
const name = document.getElementById('contact-name').value
const email = document.getElementById('contact-email').value
const question = document.getElementById('contact-question').value
const message = document.getElementById('contact-message').value

const existingMessage = JSON.parse(localStorage.getItem('userMessage')) || []

const userMessage = {
    name: name,
    email: email,
    question: question,
    message: message
}
existingMessage.push(userMessage)

localStorage.setItem('userMessage', JSON.stringify(existingMessage))
console.log(existingMessage)
alert('message sent')
})






    
     const updateUserUI = () => {
    const currentUser = JSON.parse(localStorage.getItem('loginUser'));

    if (currentUser && currentUser.username) {
        if (currentUser.isAdmin === true) {
            Admin.innerHTML = `
                <a href="#" class="nav__link">
                    Admin <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-content">
                    <li><a href="adminquery.html">Query</a></li>
                    <li><a href="adminarticle.html">Article</a></li>
                </ul>
            `;
        } else {
            Admin.innerHTML = '';
        }
        loginDiv.innerHTML = `
            <a href="#" class="nav__link">
                ${currentUser.username}
            </a>
            <ul class="dropdown-content">
                    <li ><a id="logout" href="#">Logout</a></li>
                </ul>
        `;
    } else {
        loginDiv.innerHTML = `
            <a href="login.html" class="nav__link">
                Sign in
            </a>
        `;
        Admin.innerHTML = ''; 
    }
};


 document.addEventListener('click', (e) => {
        
        if(e.target.id === 'logout'){
            e.preventDefault()
            localStorage.removeItem('loginUser');
            window.location.href = "register.html"
            updateUserUI();
        }
    })
    
               
                updateUserUI();

        </script>
    </body>
</html>