<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--==================== UNICONS ====================-->
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
        
        
        <!--==================== CSS ====================-->
        <link rel="stylesheet" href="styles.css">

        <title>Martial Portfolio</title>
    </head>
    <body>
        <!--==================== HEADER ====================-->
        <header class="header" id="header">
            <nav class="nav container">
                <a href="#" class="nav__logo">Martial</a>
                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list grid">
                        <li class="nav__item">
                            <a href="index.html" class="nav__link active-link">
                             Home
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="about.html" class="nav__link">
                                About
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="Blogs.html" class="nav__link">
                                 Blogs
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="portfolio.html" class="nav__link">
                                 my work
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="contact.html" class="nav__link">
                               Contactme
                            </a>
                        </li>

                        <li class="nav__item nav__login dropdown">
                            <a href="login.html" class="nav__link">Sign in</a>
                            
                        </li>

                        <li class="nav__item dropdown admin">
                           
                        </li>

                       
                    </ul>
                    <div class="hamburger">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                    
                </div>
            </nav>
        </header>

        <!--==================== MAIN ====================-->
        <main class="main">
         
               
               <section class="about section" id="about">
                <h2 class="section__title blog__title">TechTrends: Navigating the Ever-Changing Landscape of Technology</h2>
                <hr class="section__line">

                <div class="blogi__container container grid ">
                 <div>
                    <div class="image">
                        <img src="assets/img/GKIsoGc.jpg" alt="">
                    </div>
                    <div>
                        <p>Stay ahead of the curve with insights into the latest trends, innovations, and breakthroughs in the world of technology. From artificial intelligence and blockchain to cloud computing and cybersecurity, discover how emerging technologies are reshaping the future of software development.</p>
                    </div>
                    <div class="holderr2"></div>
                 </div>
                 <div class="reviews">
                    <p>reviews</p>
                     <img src="/assets/img/Group 24.png" alt="">
                     <form id="CommentForm">
                        <textarea name="comment" class="comment" id="comment" cols="30" rows="10"></textarea>
                        <input type="submit" class="button__comment" value="send">
                    </form>
                 </div>
                </div>
            </section>

        </main>

        <!--==================== FOOTER ====================-->
        <footer class="footer">
         <div class="footer__bg">
            <div class="footer__container container grid">
                <div>
                    <h1 class="footer__title">Martial</h1>
                    <span class="footer__subtitle">Backend developer</span>
                </div>

                <ul class="footer__links">
                    <li>
                        <a href="#services" class="footer__link">Services</a>
                    </li>

                    <li>
                        <a href="#portfolio" class="footer__link">Portfolio</a>
                    </li>

                    <li>
                        <a href="#contact" class="footer__link">Contactme</a>
                    </li>
                </ul>


                <div class="footer__socials">
                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-facebook-f"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-instagram"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-twitter-alt"></i>
                    </a>
                </div>
            </div>
            <p class="footer__copy">&#169; Martial. All right reserved</p>
         </div>
        </footer>       
        
        <script>
            const commentForm = document.getElementById('CommentForm');
            const holderDiv = document.querySelector('.holderr2');
            const hamburger = document.querySelector(".hamburger")
            const navMenu = document.querySelector(".nav__list")
            const loginDiv = document.querySelector('.nav__login');
            const Admin = document.querySelector('.admin');


            hamburger.addEventListener("click", () => {
             hamburger.classList.toggle("active")
             navMenu.classList.toggle("active")
            })

            
            commentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const comment = document.getElementById('comment').value;
        
                
                let existingComments2 = JSON.parse(localStorage.getItem('comments2')) || []
                const LoggedInUser = JSON.parse(localStorage.getItem('loginUser'))

                const comments = {
                    username: LoggedInUser.username,
                    comment: comment
                }

        
                if(LoggedInUser) {
                existingComments2.push(comments)
                alert('Comment Added')
               }
        
                localStorage.setItem('comments2', JSON.stringify(existingComments2))
               
        
                displayComments(existingComments2);
            });
        
            const displayComments = (comments) => {
               
                    holderDiv.innerHTML = '';
        
                   comments.forEach((comment) => {
                    holderDiv.innerHTML += `
                    <div class='holder'>
                      <h5>Name: ${comment.username}</h5> 
                      <p>${comment.comment}</p>    
                    </div>`;
                   });
                
               
            };
        
            const storedComments = JSON.parse(localStorage.getItem('comments2'))
        
            if (storedComments) {
                displayComments(storedComments);
            }


         
    
    
    const updateUserUI = () => {
    const currentUser = JSON.parse(localStorage.getItem('loginUser'));

    if (currentUser && currentUser.username) {
        if (currentUser.isAdmin === true) {
            Admin.innerHTML = `
                <a href="#" class="nav__link">
                    Admin <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-content">
                    <li><a href="adminquery.html">Query</a></li>
                    <li><a href="adminarticle.html">Article</a></li>
                </ul>
            `;
        } else {
            Admin.innerHTML = '';
        }
        loginDiv.innerHTML = `
            <a href="#" class="nav__link">
                ${currentUser.username}
            </a>
            <ul class="dropdown-content">
                    <li ><a id="logout" href="#">Logout</a></li>
                </ul>
        `;
    } else {
        loginDiv.innerHTML = `
            <a href="login.html" class="nav__link">
                Sign in
            </a>
        `;
        Admin.innerHTML = ''; 
    }
};


 document.addEventListener('click', (e) => {
        
        if(e.target.id === 'logout'){
            e.preventDefault()
            localStorage.removeItem('loginUser');
            window.location.href = "register.html"
            updateUserUI();
        }
    })
    
               
                updateUserUI();
        </script>


    </body>
</html>