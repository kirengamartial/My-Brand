<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--==================== UNICONS ====================-->
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
        
        
        <!--==================== CSS ====================-->
        <link rel="stylesheet" href="styles.css">

        <title>Martial Portfolio</title>
    </head>
    <body>
         <!--==================== HEADER ====================-->
         <header class="header" id="header">
            <nav class="nav container">
                <a href="#" class="nav__logo">Martial</a>
                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list grid">
                        <li class="nav__item">
                            <a href="index.html" class="nav__link active-link">
                             Home
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="about.html" class="nav__link">
                                About
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="Blogs.html" class="nav__link">
                                 Blogs
                                
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="portfolio.html" class="nav__link">
                                 my work
                            </a>
                        </li>

                        <li class="nav__item">
                            <a href="contact.html" class="nav__link">
                               Contactme
                            </a>
                        </li>

                        <li class="nav__item nav__login dropdown">
                            <a href="login.html" class="nav__link">Sign in</a>
                            
                        </li>

                        <li class="nav__item dropdown admin">
                           
                        </li>

                       
                    </ul>
                    <div class="hamburger">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                    
                </div>
            </nav>
        </header>


        <!--==================== MAIN ====================-->
        <main class="main">
         
               <section class="about section" id="about">
                <h2 class="section__title">Register</h2>
                

                <div class="login__container container ">
                 <form id="form">
                    <div class="name">
                        <label for="user_name" class="label">username</label>
                        <div class="input-with-icon">
                        <input class="input" type="text" name="user_name" id="user_name" placeholder="Type your username">
                        <img src="assets/img/Rectangle 39.png" class="input-icon" alt="">
                    </div>
                       
                    </div>
                    <div class="name">
                        <label for="user_email" class="label">useremail</label>
                        <div class="input-with-icon">
                        <input class="input" type="email" name="user_email" id="user_email" placeholder="Type your useremail">
                        <img src="assets/img/mail (1).png" class="input-icon" alt="">
                    </div>
                       
                    </div>

                    <div>
                        <label for="password" class="label">Password</label>
                        <div class="input-with-icon">
                            <input class="input" type="password" name="password" id="password" placeholder="Type your password">
                            <img src="assets/img/Rectangle 39 (1).png" class="input-icon" alt="">
                        </div>
                    </div>

                    <div class="confirm">
                        <label for="Confirm_password" class="label">Confirm Password</label>
                        <div class="input-with-icon">
                            <input class="input" type="password" name="password" id="Confirm_password" placeholder="Confirm your password">
                            <img src="assets/img/Rectangle 39 (1).png" class="input-icon" alt="">
                        </div>
                    </div>
                    <div class="container">
                        <p class="account">Already have an account?<a href="login.html"> Sign in</a></p>
                    </div>
                    <div class="error">
                       
                    </div>
                    
                    <input type="submit" value="Register" class="btn">
                 </form>
                </div>
            </section>

        </main>

        <!--==================== FOOTER ====================-->
        <footer class="footer">
         <div class="footer__bg">
            <div class="footer__container container grid">
                <div>
                    <h1 class="footer__title">Martial</h1>
                    <span class="footer__subtitle">Backend developer</span>
                </div>

                <ul class="footer__links">
                    <li>
                        <a href="#services" class="footer__link">Services</a>
                    </li>

                    <li>
                        <a href="#portfolio" class="footer__link">Portfolio</a>
                    </li>

                    <li>
                        <a href="#contact" class="footer__link">Contactme</a>
                    </li>
                </ul>


                <div class="footer__socials">
                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-facebook-f"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-instagram"></i>
                    </a>

                    <a href="" class="footer__social" target="_blank">
                        <i class="uil uil-twitter-alt"></i>
                    </a>
                </div>
            </div>
            <p class="footer__copy">&#169; Martial. All right reserved</p>
         </div>
        </footer>       
        <script >
             const Form = document.getElementById('form')
             const Admin = document.querySelector('.admin')
             const SignDiv = document.querySelector('.nav__login')
             const hamburger = document.querySelector(".hamburger")
             const navMenu = document.querySelector(".nav__list")
             const Errors = document.querySelector(".error")


            hamburger.addEventListener("click", () => {
             hamburger.classList.toggle("active")
             navMenu.classList.toggle("active")
            })

            Form.addEventListener('submit', (e) => {
                e.preventDefault()
                const inputUsername = document.getElementById('user_name').value
                const inputUseremail = document.getElementById('user_email').value
                const inupUserpassword = document.getElementById('password').value
                const inputUserConfirmPassword = document.getElementById('Confirm_password').value

                const existingUser = JSON.parse(localStorage.getItem('user')) ||  []

                const User = {
                    username: inputUsername,
                    useremail: inputUseremail,
                    password: inupUserpassword,
                    isAdmin: false,
                    isLoggedIn: true
                }
                   
                const userExists = existingUser.some(user => user.useremail === inputUseremail);
                if (userExists) {
               Errors.innerHTML = `<p>User with this email already exists</p>`;
                   setTimeout(() => {
                 Errors.innerHTML = '';
                  }, 3000);
                return;
            }

                if (inupUserpassword !== inputUserConfirmPassword) {
                    Errors.innerHTML = `<p>Passwords do not match</p>`;
                    setTimeout(() => {
                        Errors.innerHTML = '';
                    }, 3000);
                    return; 
                }

                if (inupUserpassword.length < 6) {
                     Errors.innerHTML = `<p>Password must be at least 6 characters long</p>`;
                     setTimeout(() => {
                         Errors.innerHTML = '';
                     }, 3000);
                     return; 
                }

                 
                if (!/\d/.test(inupUserpassword)) {
                    Errors.innerHTML = `<p>Password must contain numbers</p>`;
                    setTimeout(() => {
                        Errors.innerHTML = '';
                    }, 3000);
                    return;
                }


                existingUser.push(User);
                localStorage.setItem('user', JSON.stringify(existingUser));
                const loginUser = existingUser.find(user => user.username === User.username && user.password === User.password);
                localStorage.setItem('loginUser', JSON.stringify(loginUser));
                window.location.href = "index.html";
            })


            const user = JSON.parse(localStorage.getItem('loginUser'));
              if(user.isLoggedIn) {
               window.location.href = "index.html" 
               }
            
        </script>
    </body>
</html>